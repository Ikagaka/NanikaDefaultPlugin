// Generated by CoffeeScript 1.8.0

/* (C) 2014 Narazaka : Licensed under The MIT License - http://narazaka.net/license/MIT?2014 */

(function() {
  var NanikaPlugin;

  NanikaPlugin = this.NanikaPlugin;

  if (NanikaPlugin == null) {
    NanikaPlugin = {};
  }

  NanikaPlugin.communicate = {
    initialize: function(nanika) {
      return nanika.on('materialized', function() {
        return nanika.on('ssp.finish', function(response_args, response) {
          var args, index, name, result, value;
          if (response_args.Reference0 != null) {
            args = [];
            for (name in response_args) {
              value = response_args[name];
              if (result = name.match(/^Reference(\d+)$/)) {
                index = result[1] - 1;
                if (index) {
                  args[index] = value;
                }
              }
            }
            return nanika.nanikamanager.communicate(nanika.ghost.descript.sakuraname, response_args.Reference0, response_args.value, args, response_args.Age, response_args.Surface);
          }
        });
      });
    }
  };

  this.NanikaPlugin = NanikaPlugin;

}).call(this);
